---
layout: default
permalink: /description.html
---



# So, 什么是Arcomlib?

Arcomlib是ARC Communication Library的简称。它意在提供：

## 一个方便的开发范式

Arcomlib提供了一个主循环＋中断服务程序(后文简称ISR)的开发范式，通称`ArcomStd`。简而言之，只需要告诉机器在什么该时候干什么，就行了，不用费心想你的控制程序的到底长啥样。

---

可能接触过Computercraft、Opencomputers的同学们，特别是像我这样Naive的新手，都有过这样的感受：

> 心中怀有大志，脑中有个好设想，搭好要做的设备的硬件之后满怀创造新世界、开启MC信息化时代的信心，打开计算机漂亮的面板——
>
> 然后…就盯着屏幕上闪烁的光标发呆了…
>
> (我在写什么…我要写什么…我要怎么写…
>
> ~~(我…我是谁…我从哪里来...我要到哪里去...~~

然后假如你肝功能状态非常良好，熬一夜，掉几根头发，可能你还是把你的项目完成了。然而对于咱这种肝功能都日常被某学习掏空的苦逼学生，除非放假，不可能有这么多可以拿来磨的时间。

所以很长以来，CC一直是我纯粹的**纸上谈兵**对象。

有一个时期曾去搞过FRC (FIRST(R) Robotics Competition)，比赛提供的机器人控制库WPILib给我留下了深刻的印象。它将机器要执行的代码分成几部分，比如

1. 启动自动模式的执行一次的部分

2. 处于自动模式时循环执行的部分

3. 启动手动模式时执行一次的部分

4. 处于自动模式时循环执行的部分

   ......

每次开始给CC写脚本的时候，如此冥思苦想，想的无非就是怎样 *设计一个这样的结构* 么？

---

结合自己的一些思考和经验，总结出给一个用作“控制”目的的机器的代码，主要分成就这么几坨：

1. 启动时负责初始化的部分
2. 一直死循环执行的部分
3. 当某情况发生的时候执行的部分

这几坨在arcomlib里分别对应着几个你需要自己写好并注册到一台Arcom设备中的函数：

1. `initFunction`，在启动的时候调用的一个函数
2. `mainLoopFunction`，当机子处于enable状态时不断被调用的函数
3. `ISR`，中断服务程序，当收到来自其他设备的消息（后述）之后会被调用的**一组**程序。

这样，你只需要完成这几个函数的编写，其他的，交给Arcomlib即可。



但是没完。上面是不是说过诸如“收到来自其他设备的消息”之类的话？那就要关系到Arcomllib要提供的另一个东西：

## 设备之间沟通方便途径

> 如何才能让你的设备变得更智能？只需要让它们能够互相交流(Talk together)。

想象这样的场景：

- 坐在家里，手里拿个掌上电脑，敲一行命令就能遥控家里的任意设备。
- 家里的发电机组快没燃料了。于是它通知家里的物流系统。物流发现家里几乎没有存货了，于是启动位于矿区的采石场，现挖了几组煤上来，发一班列车运了过来

是不是很有未来感？这就是arcomlib的第二部分想要实现的，通称`ArcomNet`

---

这里有一个实例来阐释如何使用arcomlib提供的范式加速开发。





---

下面是待整理的文段

1. 当超过温度之后关火
2. 关火之后亮灯并让音符盒发出提示音
3. 一个重设关火温度的功能
   然后用范式来套：
   (我是图！)
   把“检查温度是否高于关火温度，如果高了就关火并亮灯发声”的逻辑写成一个函数注册给arcomlib作为主循环。注意你写的代码里不用包含死循环，arcomlib会帮你循环调用它。
   (我是图！)
   把“设定关火温度”的逻辑写成一个函数，起个名字，注册给arcomlib成为一个ISR。当收到从客户端来的设定温度的命令之后arcomlib会把消息传给刚才注册的那个ISR，调整温度。

可能有人没搞懂我这里说的中断服务程序是个什么鬼，这里来解释一下。之前由于去玩了玩单片机和

两个脑洞结合起来就成了现在这个：
我在Arcomlib客户端(这个掌上电脑)上输入命令
目标主机名 目标ISR的名字 参数
(我是图！)
Arcomlib就会去找到相应的主机，调用那台机子上的相应的ISR，并把参数传递给它。
是不是很有科技感？…

两个脑洞结合起来就成了现在这个：
我在Arcomlib客户端(这个掌上电脑)上输入命令
目标主机名 目标ISR的名字 参数
(我是图！)
Arcomlib就会去找到相应的主机，调用那台机子上的相应的ISR，并把参数传递给它。
是不是很有科技感？…